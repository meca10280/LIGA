<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"> -->
    <title>LIGA - Experiencia inmersiva</title>    
    
    <!-- A-Frame and AR.js libraries -->
    <script src="js/aframe.min.js"></script>
    <script src="js/aframe-ar.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        
        #arjsDebugUIContainer {
            display: none;
        }
        
        .ar-text-panel {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-family: Arial, sans-serif;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .ar-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }
        
        .ar-subtitle {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #87CEEB;
        }
        
        .ar-description {
            font-size: 14px;
            line-height: 1.4;
            color: #FFFFFF;
        }
    </style>
</head>

<body>
    <a-scene
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true;"
        gesture-detector>
        
        <a-assets>
            <!-- Define reusable assets -->
            <a-mixin id="text-panel" 
                     geometry="primitive: plane; width: 3; height: 2"
                     material="color: #000000; opacity: 0.8; transparent: true">
            </a-mixin>
        </a-assets>

        <!-- Marker 1 - Hiro Pattern -->
        <a-marker type="pattern" url="patterns/00.patt" id="marker-00">
            <a-entity id="content-hiro" visible="false">
                <!-- Dark background panel -->
                <a-plane 
                    position="0 0 0.01" 
                    width="4" 
                    height="2.5" 
                    color="#000000" 
                    opacity="0.85" 
                    transparent="true">
                </a-plane>
                
                <!-- Title -->
                <a-text 
                    value="HIRO MARKER" 
                    position="0 0.8 0.02" 
                    align="center" 
                    color="#FFD700" 
                    font="kelsonsans" 
                    width="8">
                </a-text>
                
                <!-- Subtitle -->
                <a-text 
                    value="Default AR Marker" 
                    position="0 0.4 0.02" 
                    align="center" 
                    color="#87CEEB" 
                    font="kelsonsans" 
                    width="6">
                </a-text>
                
                <!-- Description -->
                <a-text 
                    value="This is the classic Hiro marker used for\nAugmented Reality demonstrations.\nIt's widely recognized and reliable." 
                    position="0 -0.2 0.02" 
                    align="center" 
                    color="#FFFFFF" 
                    font="kelsonsans" 
                    width="5">
                </a-text>
            </a-entity>
        </a-marker>

        <!-- Marker 2 - Kanji Pattern -->
        <a-marker type="pattern" url="patterns/01.patt" id="marker-01">
            <a-entity id="content-kanji" visible="false">
                <!-- Dark background panel -->
                <a-plane 
                    position="0 0 0.01" 
                    width="4" 
                    height="2.5" 
                    color="#1a1a1a" 
                    opacity="0.9" 
                    transparent="true">
                </a-plane>
                
                <!-- Title -->
                <a-text 
                    value="KANJI MARKER" 
                    position="0 0.8 0.02" 
                    align="center" 
                    color="#FF6B6B" 
                    font="kelsonsans" 
                    width="8">
                </a-text>
                
                <!-- Subtitle -->
                <a-text 
                    value="Japanese Character Marker" 
                    position="0 0.4 0.02" 
                    align="center" 
                    color="#4ECDC4" 
                    font="kelsonsans" 
                    width="6">
                </a-text>
                
                <!-- Description -->
                <a-text 
                    value="Features a Japanese Kanji character.\nProvides excellent tracking stability\nfor AR applications." 
                    position="0 -0.2 0.02" 
                    align="center" 
                    color="#FFFFFF" 
                    font="kelsonsans" 
                    width="5">
                </a-text>
            </a-entity>
        </a-marker>

        <!-- Custom Marker 3 - Pattern-based -->
        <a-marker type="pattern" url="patterns/02.patt" id="marker-02">
            <a-entity id="content-custom1" visible="false">
                <!-- Dark background panel -->
                <a-plane 
                    position="0 0 0.01" 
                    width="4" 
                    height="2.5" 
                    color="#2c2c2c" 
                    opacity="0.88" 
                    transparent="true">
                </a-plane>
                
                <!-- Title -->
                <a-text 
                    value="CUSTOM MARKER" 
                    position="0 0.8 0.02" 
                    align="center" 
                    color="#9B59B6" 
                    font="kelsonsans" 
                    width="8">
                </a-text>
                
                <!-- Subtitle -->
                <a-text 
                    value="Personalized Pattern" 
                    position="0 0.4 0.02" 
                    align="center" 
                    color="#F39C12" 
                    font="kelsonsans" 
                    width="6">
                </a-text>
                
                <!-- Description -->
                <a-text 
                    value="A custom-designed marker pattern\ncreated specifically for your\nAR experience needs." 
                    position="0 -0.2 0.02" 
                    align="center" 
                    color="#FFFFFF" 
                    font="kelsonsans" 
                    width="5">
                </a-text>
            </a-entity>
        </a-marker>

        <!-- Barcode Marker -->
        <a-marker type="pattern" url="patterns/03.patt" id="marker-03">
            <a-entity id="content-barcode" visible="false">
                <!-- Dark background panel -->
                <a-plane 
                    position="0 0 0.01" 
                    width="4" 
                    height="2.5" 
                    color="#0f0f0f" 
                    opacity="0.9" 
                    transparent="true">
                </a-plane>
                
                <!-- Title -->
                <a-text 
                    value="BARCODE MARKER" 
                    position="0 0.8 0.02" 
                    align="center" 
                    color="#E74C3C" 
                    font="kelsonsans" 
                    width="8">
                </a-text>
                
                <!-- Subtitle -->
                <a-text 
                    value="Matrix Code #5" 
                    position="0 0.4 0.02" 
                    align="center" 
                    color="#3498DB" 
                    font="kelsonsans" 
                    width="6">
                </a-text>
                
                <!-- Description -->
                <a-text 
                    value="Barcode-style marker with ID 5.\nOffers precise tracking and\nfast recognition capabilities." 
                    position="0 -0.2 0.02" 
                    align="center" 
                    color="#FFFFFF" 
                    font="kelsonsans" 
                    width="5">
                </a-text>
            </a-entity>
        </a-marker>

        <!-- Camera -->
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // JavaScript for enhanced marker interaction
        AFRAME.registerComponent('marker-handler', {
            init: function() {
                const marker = this.el;
                const content = marker.querySelector('a-entity');
                
                // Marker found event
                marker.addEventListener('markerFound', function() {
                    console.log('Marker found:', marker.id);
                    if (content) {
                        content.setAttribute('visible', true);
                        // Add entrance animation
                        content.setAttribute('animation', {
                            property: 'scale',
                            from: '0 0 0',
                            to: '1 1 1',
                            dur: 500,
                            easing: 'easeOutElastic'
                        });
                    }
                });
                
                // Marker lost event
                marker.addEventListener('markerLost', function() {
                    console.log('Marker lost:', marker.id);
                    if (content) {
                        // Add exit animation
                        content.setAttribute('animation', {
                            property: 'scale',
                            from: '1 1 1',
                            to: '0 0 0',
                            dur: 300,
                            easing: 'easeInQuad'
                        });
                        
                        // Hide after animation
                        setTimeout(() => {
                            content.setAttribute('visible', false);
                        }, 300);
                    }
                });
            }
        });

        // Apply marker handler to all markers
        document.addEventListener('DOMContentLoaded', function() {
            const markers = document.querySelectorAll('a-marker');
            markers.forEach(marker => {
                marker.setAttribute('marker-handler', '');
            });
        });

        // Additional utility functions
        function createDynamicMarkerContent(markerId, title, subtitle, description, colors = {}) {
            const marker = document.querySelector(`#${markerId}`);
            if (!marker) return;
            
            const content = marker.querySelector('a-entity') || document.createElement('a-entity');
            content.setAttribute('id', `content-${markerId}`);
            content.setAttribute('visible', 'false');
            
            // Set default colors
            const titleColor = colors.title || '#FFD700';
            const subtitleColor = colors.subtitle || '#87CEEB';
            const descriptionColor = colors.description || '#FFFFFF';
            const backgroundColor = colors.background || '#000000';
            
            content.innerHTML = `
                <a-plane 
                    position="0 0 0.01" 
                    width="4" 
                    height="2.5" 
                    color="${backgroundColor}" 
                    opacity="0.85" 
                    transparent="true">
                </a-plane>
                
                <a-text 
                    value="${title}" 
                    position="0 0.8 0.02" 
                    align="center" 
                    color="${titleColor}" 
                    font="kelsonsans" 
                    width="8">
                </a-text>
                
                <a-text 
                    value="${subtitle}" 
                    position="0 0.4 0.02" 
                    align="center" 
                    color="${subtitleColor}" 
                    font="kelsonsans" 
                    width="6">
                </a-text>
                
                <a-text 
                    value="${description}" 
                    position="0 -0.2 0.02" 
                    align="center" 
                    color="${descriptionColor}" 
                    font="kelsonsans" 
                    width="5">
                </a-text>
            `;
            
            if (!marker.contains(content)) {
                marker.appendChild(content);
            }
        }

        // Example of dynamic content creation
        // Uncomment to use:
        /*
        createDynamicMarkerContent(
            'marker-custom2',
            'DYNAMIC MARKER',
            'Created with JavaScript',
            'This marker content was\\ncreated dynamically using\\nJavaScript functions.',
            {
                title: '#00FF00',
                subtitle: '#FF00FF',
                description: '#FFFFFF',
                background: '#333333'
            }
        );
        */
    </script>
</body>
</html>
